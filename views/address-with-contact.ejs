<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Address with Contact</title>
</head>
<body>
	<nav class="main-menu">
		<ul>
			<li><a href="/contacts">Contacts</a></li>
			<li><a href="/groups">Groups</a></li>
			<li><a href="/addresses">Addresses</a></li>
			<li><a href="/profiles">Profiles</a></li>
		</ul>
	</nav>
	<style>
		.main-menu {
			text-align: center;
			background: crimson;
		}

		.main-menu ul li {
			display: inline-block;
			padding: 10px;
		}

		.main-menu ul li a {
			text-decoration: none;
			color: #fff;
			font-style: bold;
		}

		.main-menu ul li a:hover {
			font-style: normal;
			color: wheat;
		}
	</style>

	<h2>Hi <%=  contact.name %></h2>
	<h2><%= contact.company %></h2>


	<table style="width: 100%" border="1">
		<tr>
			<th>ID</th>
			<th>STREET</th>
			<th>City</th>
			<th>Zip Code</th>
		</tr>
	
		<% for (i = 0 ; i < allAddress.length; i++) { %>
		<tr>
			<td><%= allAddress[i].id %></td>
			<td><%= allAddress[i].street %></td>
			<td><%= allAddress[i].city %></td>
			<td><%= allAddress[i].zipcode %></td>
		</tr>
		<% } %>
	</table>

	
	<br><br>
	<form onsubmit="return validateAddressForm();" method="post" action="/addresses">
		
		<input type="hidden" id="id" name="id" value="<%= (typeof editItem != 'undefined') ? editItem.id  : '' %>">
		<input type="text" id="street" name="street"  placeholder="Street" value="<%= (typeof editItem != 'undefined') ? editItem.street  : '' %>">
		<input type="text" id="city" name="city"  placeholder="City" value="<%= (typeof editItem != 'undefined') ? editItem.city  : '' %>">
		<input type="text" id="zipcode" name="zipcode"  placeholder="Zipcode" value="<%= (typeof editItem != 'undefined') ? editItem.zipcode  : '' %>">
		
		<input type="hidden" id="contacts_id" name="contacts_id" value="<%= contact.id %>">

		<input type="submit" value="Tambah">
	</form>

	<script>
		function validateAddressForm() {
			let hiddenId = document.getElementById('id').value;
			let streetField = document.getElementById('street').value;
			let contactNameDropdown = document.getElementById('contacts_id');
			let arrExistingContactId = contactNameDropdown.getAttribute('data-exists-contactid').split(',');
			let selectedOptions = contactNameDropdown.options[contactNameDropdown.selectedIndex].value;
			
			if (streetField.length < 1) {
				alert('Street harus diisi');
		
				return false;
			}

			return true;
			
		}
	</script>

</body>
</html>